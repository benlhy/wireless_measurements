/////////////////////////////////////////////////////////////////////////////
// Spi.h
/////////////////////////////////////////////////////////////////////////////

#ifndef SPI_H_
#define SPI_H_

/////////////////////////////////////////////////////////////////////////////
// Includes
/////////////////////////////////////////////////////////////////////////////

#include "spi_config.h"

/////////////////////////////////////////////////////////////////////////////
// Default Configuration Options
/////////////////////////////////////////////////////////////////////////////

#ifndef SPI_BUF_SIZE
#define SPI_BUF_SIZE            20
#endif

#ifndef SPI_CS_ASSERT_LVL
#define SPI_CS_ASSERT_LVL       1
#endif

#ifndef SPI_CS_DEASSERT_LVL
#define SPI_CS_DEASSERT_LVL     0
#endif

#ifndef SPI_CS_SETUP_US
#define SPI_CS_SETUP_US         6
#endif

#ifndef SPI_CS_HOLD_US
#define SPI_CS_HOLD_US          2
#endif

/////////////////////////////////////////////////////////////////////////////
// Defines
/////////////////////////////////////////////////////////////////////////////

#define DELAY_TIMER_FREQ        (2000000)

#define ST_IDLE                 0
#define ST_CS_SETUP             1
#define ST_TX                   2
#define ST_CS_HOLD              3

/////////////////////////////////////////////////////////////////////////////
// Prototypes
/////////////////////////////////////////////////////////////////////////////

void SPI_StartTransfer(SI_VARIABLE_SEGMENT_POINTER(buffer, uint8_t, SI_SEG_GENERIC), uint8_t size);

#endif /* SPI_H_ */
